(this["webpackJsonpsnake-game-reactjs"]=this["webpackJsonpsnake-game-reactjs"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(3),o=a.n(r),i=(a(13),a(1)),l=a(4),c=a(5),u=a(7),m=a(6),d=function e(t){var a=t.snakeBody;return e.defaultProps={snakeBody:[]},s.a.createElement("div",null,a.map((function(e,t){var a={left:"".concat(e[0],"%"),top:"".concat(e[1],"%")};return s.a.createElement("div",{className:"snakeBody",key:t,style:a})})))},p=function e(t){var a=t.fruitBody;e.defaultProps={fruitBody:[]};var n={left:"".concat(a[0],"%"),top:"".concat(a[1],"%")};return s.a.createElement("div",{className:"fruit",style:n})},v=function e(t){var a=t.results;return e.defaultProps={results:[]},s.a.createElement("div",{className:"results"},s.a.createElement("div",{className:"resultsWrapTitle"},s.a.createElement("h2",null,"\u041b\u0443\u0447\u0448\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0438:")),s.a.createElement("ul",null,a.map((function(e,t){return s.a.createElement("li",{key:t},"".concat(e.player," - ").concat(e.score))}))))},f=function e(t){var a=t.onChange,n=t.onClick,r=t.value,o=t.points;return e.defaultProps={onChange:function(){},onClick:function(){},value:"",points:0},s.a.createElement("div",{className:"saveResult"},s.a.createElement("div",{className:"saveResult_congrats"},"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c, \u0432\u0430\u0448 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 - ",o," "),s.a.createElement("form",{className:"saveResult_form"},s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"playerName"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f:"),s.a.createElement("input",{id:"playerName",type:"text",onChange:a,value:r})),s.a.createElement("button",{onClick:n},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u0437\u044c\u0442\u0430\u0442"),s.a.createElement("button",{onClick:document.location.reload},"\u041e\u0442\u043c\u0435\u043d\u0430")))},h=function e(t){var a=t.points;return e.defaultProps={points:0},s.a.createElement("div",{className:"playData"},s.a.createElement("div",{className:"playData_text"},"\u0412\u044b \u043d\u0430\u0431\u0440\u0430\u043b\u0438:  ",s.a.createElement("span",{className:"playData_small"},a)),s.a.createElement("div",{className:"playData_text"},"\u0412\u0430\u0448\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c:  ",s.a.createElement("span",{className:"playData_small"},10+7*a)," \u041a\u043c/\u0447"))},y=[{player:"\u0412\u0438\u043d \u0414\u0438\u0437\u0435\u043b\u044c",score:20},{player:"\u0420\u043e\u0431\u0438\u043d \u0413\u0443\u0434",score:15},{player:"\u0427\u0435\u0431\u0443\u0440\u0430\u0448\u043a\u0430",score:10},{player:"\u041c\u0438\u0448\u043a\u0430 \u0413\u0430\u043c\u043c\u0438",score:5}],k={fruit:[50,50],direction:"RIGHT",snakeBody:[[30,30]],points:0,isGameOn:!1,showForm:!1,inputTextValue:"",resultsList:function(){return localStorage.getItem("playersList")?JSON.parse(localStorage.getItem("playersList")):y}()},E=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).onKeyDown=function(t){var a=e.state.direction;switch((t=t||window.event).keyCode){case 38:if("DOWN"===a)return;e.setState({direction:"UP"});break;case 40:if("UP"===a)return;e.setState({direction:"DOWN"});break;case 37:if("RIGHT"===a)return;e.setState({direction:"LEFT"});break;case 39:if("LEFT"===a)return;e.setState({direction:"RIGHT"})}},e.moveSnake=function(){var t=Object(i.a)(e.state.snakeBody),a=t[t.length-1];switch(e.state.direction){case"RIGHT":a=[a[0]+5,a[1]];break;case"LEFT":a=[a[0]-5,a[1]];break;case"DOWN":a=[a[0],a[1]+5];break;case"UP":a=[a[0],a[1]-5]}t.push(a),t.shift(),e.setState({snakeBody:t})},e.isCrushToBorder=function(){var t=e.state.snakeBody[e.state.snakeBody.length-1];(t[0]>=100||t[1]>=100||t[0]<0||t[1]<0)&&e.gameOver()},e.isCrushToSnake=function(t,a){var n=Object(i.a)(e.state.snakeBody),s=n[n.length-1];if(!t){var r=!1;return n.forEach((function(e){a[0]===e[0]&&a[1]===e[1]&&(r=!0)})),r}n.pop(),n.forEach((function(t){s[0]===t[0]&&s[1]===t[1]&&e.gameOver()}))},e.isAteFruit=function(){var t=e.state,a=t.snakeBody,n=t.fruit,s=a[a.length-1];s[0]===n[0]&&s[1]===n[1]&&(e.setState((function(t){var a=t.points;return{points:++a,fruit:e.getNewFruitPosition()}})),e.increaseSnakeSize(),e.increaseSpeed())},e.increaseSnakeSize=function(){var t=Object(i.a)(e.state.snakeBody);t.unshift([]),e.setState({snakeBody:t})},e.increaseSpeed=function(){e.speed>10&&(clearInterval(e.intervalID),e.intervalID=null,e.speed-=8,e.intervalID=setInterval(e.moveSnake,e.speed))},e.getNewFruitPosition=function(){var t=[5*Math.floor((20*Math.random()+1)/2),5*Math.floor((20*Math.random()+1)/2)];return e.isCrushToSnake(!1,t)?e.getNewFruitPosition():t},e.handleInputOnChange=function(t){var a=t.target.value;e.setState({inputTextValue:a})},e.gameOver=function(){clearInterval(e.intervalID),e.speed=300,e.setState({isSaveResultsOpen:!0,isGameOn:!1})},e.saveResults=function(){var t=e.state,a=t.inputTextValue,n=t.points,s=t.resultsList;s.push({player:a,score:n}),localStorage.setItem("playersList",JSON.stringify(s)),e.setState(k)},e.startNewGame=function(){e.state.isGameOn||(e.intervalID=setInterval(e.moveSnake,e.speed),e.setState({isGameOn:!0}))},e.state=k,e.intervalID=null,e.speed=300,e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.onkeydown=this.onKeyDown}},{key:"componentDidUpdate",value:function(){if(this.state.isGameOn){this.isCrushToBorder(),this.isCrushToSnake(!0),this.isAteFruit()}}},{key:"componentWillUnmount",value:function(){this.state.isGameOn||clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this.state,t=e.snakeBody,a=e.points,n=e.fruit,r=e.isGameOn,o=e.inputTextValue,i=e.isSaveResultsOpen,l=e.resultsList.sort((function(e,t){return t.score-e.score})).splice(0,15),c=l&&l.length>0&&!r;return s.a.createElement(s.a.Fragment,null,i?s.a.createElement(f,{points:a,onChange:this.handleInputOnChange,onClick:this.saveResults,value:o}):s.a.createElement("div",{className:"center"},s.a.createElement("h1",{className:"title"},"\u0417\u043c\u0435\u0439\u043a\u0430 \u043d\u0430 React Js"),s.a.createElement("div",{className:"gameField"},s.a.createElement(d,{snakeBody:t}),s.a.createElement(p,{fruitBody:n})),r&&s.a.createElement(h,{points:a}),!r&&s.a.createElement("button",{className:"newGame",onClick:this.startNewGame},"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"),c&&s.a.createElement(v,{results:l})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,a){e.exports=a(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.2fc8eea9.chunk.js.map